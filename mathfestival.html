<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <style>
         
         #name {
        width: 200px; /* 너비를 조절하려는 값으로 변경 */
        height : 24px;
        font-size: 18px;
        text-align: center;
        margin: 0 auto;
         }
         
         .bordered-div {
            border: 2px solid black;
            padding: 5px;
        }

        .custom-radio input[type="radio"] {
            display: none;
        }
         
         .custom-radio .options-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap : 10px; /* 빈 공간 크기를 조절할 수 있습니다 */
    }

        .custom-radio label {
            display: inline-block;
            width: 210px;
            height: 70px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
        }

        .custom-radio input[type="radio"]:checked + label {
            background-color: #63dc36;
            color: white;
        }
         
         .space-between {
        margin-bottom: 20px; /* You can adjust this value to control the amount of space */
    }

    /* Add your CSS styles for the END button */
    #endButton {
            padding : 15px 27px;
            font-size : 16px;
            border : 1px soild black;
            cursor : pointer;
            border-radius: 4px;
            background-color: lightgray;
            color : black;
        }

        #endButton:hover {
        background-color : white;
    }
         
    </style>
    
</head>
<body>

<label for="name">이름: </label>
        <input type="text" id="name" name="name">
    
    <div name="question1">
        <h2>
            포션을 통해서 한 가지 능력을 얻을 수 있다면?
        </h2>
        <div class="custom-radio">   
            <div class="options-grid">    
                <input type="radio" id="option1" name="answer1"  value="sl">
                        <label for="option1">모두를 설득할 수 있는 화술</label><br>

                        <input type="radio" id="option2" name="answer1" value="re">
                        <label for="option2">모든 문제를 풀 수 있는 지능</label><br>

                        <input type="radio" id="option3" name="answer1" value="hu">
                        <label for="option3">다른 사람의 말의 진위 여부를 판단할 수 있는 능력</label><br>

                        <input type="radio" id="option4" name="answer1" value="gr">
                        <label for="option4">어떠한 상황에서도 최고의 결정을 내릴 수 있는 판단력</label><br>
            </div>
            </div>
    </div>
    <div name="question1">
        <h2>
            한 가지 물건을 고르기
        </h2>
        <div class="custom-radio">
            <div class="options-grid">    
                <input type="radio" id="potion" name="answer2" value="re">
                    <label for="potion">물약</label><br>

                    <input type="radio" id="sowrd" name="answer2" value="gr">
                    <label for="sowrd">검</label><br>

                    <input type="radio" id="wand" name="answer2" value="hu">
                    <label for="wand">지팡이</label><br>

                    <input type="radio" id="cape" name="answer2" value="sl">
                    <label for="cape">망토</label><br>
            </div>
        </div>
    </div>
    <div name="question1">
            <h2>
                좋아하는 색
            </h2>
            <div class="custom-radio">
                <div class="options-grid">        
                    <input type="radio" id="black" name="answer3" value="hu">
                        <label for="black">검정색</label><br>

                        <input type="radio" id="blue" name="answer3" value="re">
                        <label for="blue">청동색</label><br>

                        <input type="radio" id="silver" name="answer3" value="sl">
                        <label for="silver">은색</label><br>

                        <input type="radio" id="gold" name="answer3" value="gr">
                        <label for="gold">금색</label><br>
                </div>
                </div>
        </div>
    <div name="question1">
        <h2>
            나와 가장 속성이 비슷한 원소
        </h2>
        <div class="custom-radio">
           <div class="options-grid">    
            <input type="radio" id="fire" name="answer4" value="gr">
                <label for="fire">불</label><br>

                <input type="radio" id="dirt" name="answer4" value="hu">
                <label for="dirt">흙</label><br>

                <input type="radio" id="air" name="answer4" value="re">
                <label for="air">공기</label><br>

                <input type="radio" id="water" name="answer4" value="sl">
                <label for="water">물</label><br>
            </div>
            </div>
    </div>
    <div name="question1">
        <h2>
            내가 가장 중요하게 생각하는 가치
        </h2>
        <div class="custom-radio">
            <div class="options-grid">   
            <input type="radio" id="relationship" name="answer5" value="hu">
                <label for="relationship">협동</label><br>

                <input type="radio" id="brave" name="answer5" value="gr">
                <label for="brave">용기</label><br>

                <input type="radio" id="creativity" name="answer5" value="re">
                <label for="creativity">창의성</label><br>

                <input type="radio" id="determine" name="answer5" value="sl">
                <label for="determine">의지력</label><br>
            </div>
            </div>
    </div>
    <div name="question1">
        <h2>
            다른 친구가 나와 가장 친한 친구를 괴롭혀 다치게 했다면
        </h2>
        <div class="custom-radio">
            <div class="options-grid">   
            <input type="radio" id="fuck" name="answer6" value="sl">
                <label for="fuck">괴롭힌 친구를 욕한다</label><br>

                <input type="radio" id="care" name="answer6" value="hu">
                <label for="care">다친 내 친구를 먼저 보건실에 데려다준다</label><br>

                <input type="radio" id="revenger" name="answer6" value="gr">
                <label for="revenger">괴롭힌 친구를 복수해준다</label><br>

                <input type="radio" id="safe" name="answer6" value="re">
                <label for="safe">내 친구가 다시는 괴롭힘 받지 않도록 지켜준다</label><br>
            </div>
            </div>
    </div>
    <div name="question1">
        <h2>
            내가 원하는 기숙사 입구의 위치
        </h2>
        <div class="custom-radio">
            <div class="options-grid">    
            <input type="radio" id="under" name="answer7" value="hu">
                <label for="under">지하실</label><br>

                <input type="radio" id="picuture" name="answer7" value="gr">
                <label for="picuture">그림 안</label><br>

                <input type="radio" id="wall" name="answer7" value="sl">
                <label for="wall">벽 안</label><br>

                <input type="radio" id="staute" name="answer7" value="re">
                <label for="staute">동상 아래</label><br>
            </div>
            </div>
    </div>
    <div name="question1">
        <h2>
            원하는 사감 선생님의 성격
        </h2>
        <div class="custom-radio">
          <div class="options-grid">      
            <input type="radio" id="severity" name="answer8" value="gr">
                <label for="severity">엄격하지만 은근 잘 챙겨주는 선생님</label><br>

                <input type="radio" id="us" name="answer8" value="sl">
                <label for="us">적어도 우리에게는 잘해주는 선생님</label><br>

                <input type="radio" id="kind" name="answer8" value="hu">
                <label for="kind">착하시고 잘 챙겨주시는 선생님</label><br>

                <input type="radio" id="lesson" name="answer8" value="re">
                <label for="lesson">수업 잘 해주시는 선생님</label><br>
        </div>
        </div>
    </div>
    <div name="question1">
        <h2>
            담임선생님 과목은?
        </h2>
        <div class="custom-radio">
            <div class="options-grid">    
            <input type="radio" id="physics" name="answer9" value="gr">
                <label for="physics">물리</label><br>

                <input type="radio" id="chemistry" name="answer9" value="sl">
                <label for="chemistry">화학</label><br>

                <input type="radio" id="biology" name="answer9" value="hu">
                <label for="biology">생명과학</label><br>

                <input type="radio" id="earth" name="answer9" value="re">
                <label for="earth">지구과학</label><br>
        </div>
        </div>
    </div>
    <div name="question1">
        <h2>
            호그와트를 침입해온 적들과 전투가 벌어졌다. 전투에 참여하게 된다면 그 이유는?
        </h2>
        <div class="custom-radio">
            <div class="options-grid">    
            <input type="radio" id="honor" name="answer10" value="sl">
                <label for="honor">전쟁에서 공을 세우면 나에게 돌아오는 것이 많을 것이기 때문이다</label><br>

                <input type="radio" id="splurge" name="answer10" value="re">
                <label for="splurge">나의 실력을 뽐낼 수 있는 기회라고 생각하기 때문이다</label><br>

                <input type="radio" id="correct" name="answer10" value="hu">
                <label for="correct">참여하는 것이 옳은 일이라고 생각하기 때문이다</label><br>

                <input type="radio" id="Justice" name="answer10" value="gr">
                <label for="Justice">맞서 싸우는 것이 진정한 마법사라고 생각하기 때문이다</label><br>
            </div>
        </div>
    </div>

    <div class="space-between"></div>
    
    <button id="endButton">END</button>
    
        <script>
document.addEventListener("DOMContentLoaded", function() {
    const questionsContainer = document.querySelectorAll('[name="question1"]');
    const endButton = document.getElementById('endButton');
    const nameInput = document.getElementById('name');

    const selectedCounts = {
        sl: 0,
        re: 0,
        hu: 0,
        gr: 0
    };

    endButton.addEventListener('click', () => {
        const allRadioButtons = document.querySelectorAll('.custom-radio input[type="radio"]:checked');
        const totalQuestionCount = questionsContainer.length;

        if (allRadioButtons.length < totalQuestionCount) {
            alert('모든 질문에 답하지 않았습니다.');
            return;
        }

        allRadioButtons.forEach(radioButton => {
            const value = radioButton.value;
            selectedCounts[value.substring(0, 2)]++;
        });

        const userName = nameInput.value;
        console.log(`이름: ${userName}`);

        // 설문 데이터를 객체로 생성
        const surveyData = {
            name: userName,
            answer1: selectedCounts.sl,
            answer2: selectedCounts.re,
            answer3: selectedCounts.hu,
            answer4: selectedCounts.gr,
            // 나머지 설문 항목에 대한 데이터도 추가
        };

        // Flask 서버 주소 설정
        const serverUrl = 'http://math-festival-xmkrr.run.goorm.site/submit_survey'; // 실제 서버 주소로 변경해야 합니다.

        // POST 요청 보내기
        fetch(serverUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(surveyData)
        })
        .then(response => {
            if (response.ok) {
                alert('설문조사가 성공적으로 제출되었습니다.');
            } else {
                alert('설문조사 제출에 실패했습니다.');
            }
        })
        .catch(error => {
            console.error('오류 발생:', error);
            alert('오류가 발생했습니다.');
        });

        // 설문조사 완료 후 입력값 초기화
        allRadioButtons.forEach(radioButton => {
            radioButton.checked = false;
        });
        nameInput.value = '';

    });

    questionsContainer.forEach(question => {
        const radioButtons = question.querySelectorAll('input[type="radio"]');

        radioButtons.forEach(radioButton => {
            radioButton.addEventListener('click', () => {
                const name = radioButton.name;
                const selectedRadios = document.querySelectorAll(`input[type="radio"][name="${name}"]:checked`);

                // 다른 라디오 버튼 선택 해제
                radioButtons.forEach(otherRadioButton => {
                    if (otherRadioButton !== radioButton) {
                        otherRadioButton.checked = false;
                    }
                });
            });
        });
    });
});
    </script>
</body>
</html>
